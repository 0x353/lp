<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Simple QR with Logo</title>
  <script src="https://cdn.jsdelivr.net/npm/qrcodejs/qrcode.min.js"></script>
  <style>
    #qrContainer {
      position: relative;
      display: none;
      width: 220px;
      margin-top: 20px;
    }

    #qrCanvas {
      cursor: zoom-in;
      border: 2px solid #000;
      border-radius: 8px;
    }

    #qrLogo {
      position: absolute;
      top: 50%;
      left: 50%;
      width: 40px;
      height: 40px;
      transform: translate(-50%, -50%);
      pointer-events: none;
    }

    #closeQR {
      position: absolute;
      top: -10px;
      right: -10px;
      background: #fff;
      color: #000;
      border-radius: 50%;
      width: 22px;
      height: 22px;
      text-align: center;
      cursor: pointer;
      font-size: 14px;
      line-height: 22px;
      border: 1px solid #000;
    }
  </style>
</head>
<body>

<button id="qrlink">Generate QR</button>

<div id="qrContainer">
  <div id="closeQR">Ã—</div>
  <div id="qrCanvas"></div>
  <img id="qrLogo" src="https://upload.wikimedia.org/wikipedia/commons/6/6b/WhatsApp.svg" alt="Logo">
</div>

<script>
  const qrlink = document.getElementById("qrlink");
  const qrCanvas = document.getElementById("qrCanvas");
  const qrContainer = document.getElementById("qrContainer");
  const qrLogo = document.getElementById("qrLogo");
  const closeQR = document.getElementById("closeQR");

  let qr;

  qrlink.addEventListener("click", () => {
    if (!qr) {
      const link = "https://example.com"; // Ganti ini sesuai link dinamis kamu
      qr = new QRCode(qrCanvas, {
        text: link,
        width: 220,
        height: 220,
        colorDark: "#000000",
        colorLight: "#ffffff",
        correctLevel: QRCode.CorrectLevel.H
      });
      qrContainer.style.display = "block";
      qrlink.innerText = "Download QR";
    } else {
      const canvas = qrCanvas.querySelector("canvas");
      const image = canvas.toDataURL("image/png");
      const a = document.createElement("a");
      a.href = image;
      a.download = "qr-code.png";
      a.click();
    }
  });

  qrCanvas.addEventListener("click", () => {
    const img = qrCanvas.querySelector("canvas").toDataURL("image/png");
    const win = window.open();
    win.document.write(`<img src="${img}" style="width:90%;margin:auto;display:block;">`);
  });

  closeQR.addEventListener("click", () => {
    qrCanvas.innerHTML = "";
    qr = null;
    qrContainer.style.display = "none";
    qrlink.innerText = "Generate QR";
  });
</script>

</body>
</html>
