<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Prediksi Angka Palsu AI</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background: #111;
      color: #fff;
      padding: 20px;
      text-align: center;
    }

    #container {
      display: flex;
      justify-content: center;
      gap: 20px;
      font-size: 3rem;
      margin-bottom: 20px;
    }

    .buttons {
      display: flex;
      gap: 15px;
      margin-top: 30px;
      flex-wrap: wrap;
      justify-content: center;
    }

    button {
      padding: 10px 20px;
      font-size: 1rem;
      cursor: pointer;
      color: white;
      background: linear-gradient(135deg, #00b7ff, #007bff);
      border: none;
      border-radius: 12px;
      box-shadow: 0 4px 15px rgba(0, 183, 255, 0.8);
      transition: transform 0.2s, box-shadow 0.2s;
    }

    button:hover {
      transform: scale(1.05);
      box-shadow: 0 6px 20px rgba(0, 183, 255, 1);
    }

    @media (max-width: 600px) {
      button {
        font-size: 0.8rem;
        padding: 8px 15px;
      }
    }

    .shake {
      animation: shake 0.3s;
    }

    @keyframes shake {
      0% { transform: translateX(0); }
      25% { transform: translateX(-5px); }
      50% { transform: translateX(5px); }
      75% { transform: translateX(-5px); }
      100% { transform: translateX(0); }
    }

    #prediksiArea {
      margin-top: 40px;
      background: #222;
      padding: 20px;
      border-radius: 12px;
    }
  </style>
</head>
<body>

  <h1>Prediksi Angka Palsu AI</h1>
  
  <div id="container">
    <div class="number" id="num1">0</div>
    <div class="number" id="num2">0</div>
    <div class="number" id="num3">0</div>
    <div class="number" id="num4">0</div>
  </div>

  <div class="buttons">
    <button onclick="generateRandomNumbers()">Generate</button>
    <button onclick="copyToClipboard()">Copy</button>
    <button onclick="generatePrediksi()">Prediksi Palsu</button>
  </div>

  <br><br>
  <canvas id="chartNumbers" height="100"></canvas>
  <br>

  <div id="stats">
    <p>ðŸ”¢ Angka Paling Sering Muncul: <span id="mostFrequent"><b>-</b></span></p>
    <p>ðŸ“‰ Angka Paling Jarang Muncul: <span id="leastFrequent"><b>-</b></span></p>
    <p>ðŸ“Š Total Angka Dihasilkan: <span id="totalGenerated"><b>0</b></span></p>
  </div>

  <div id="prediksiArea">
    <h2>Prediksi AI Palsu</h2>
    <p><b>Hasil Resmi Terakhir:</b> <input type="text" id="inputTerakhir" maxlength="4" placeholder="cth: 5821" /></p>
    <button onclick="generatePrediksi()">Analisis & Prediksi</button>
    <div id="outputPrediksi" style="margin-top: 20px; font-size: 1.2rem;"></div>
  </div>

  <script>
    let chartNumbers;

    function generateRandomNumbers() {
      let chart = [0, 0, 0, 0];
      let elements = [
        document.getElementById("num1"),
        document.getElementById("num2"),
        document.getElementById("num3"),
        document.getElementById("num4")
      ];
      let interval = [];

      for (let i = 0; i < 4; i++) {
        interval[i] = setInterval(() => {
          chart[i] = Math.floor(Math.random() * 10);
          elements[i].textContent = chart[i];
        }, 50);
      }

      setTimeout(() => {
        for (let i = 0; i < 4; i++) {
          clearInterval(interval[i]);
          elements[i].classList.add("shake");
          setTimeout(() => {
            elements[i].classList.remove("shake");
          }, 500);
        }
        saveToHistory(chart.join(""));
        updateChart();
      }, 2500);
    }

    function saveToHistory(newNumber) {
      let history = JSON.parse(localStorage.getItem("history")) || [];
      if (history.length >= 50) history.shift();
      history.push(newNumber);
      localStorage.setItem("history", JSON.stringify(history));
    }

    function updateChart() {
      let history = JSON.parse(localStorage.getItem("history")) || [];
      let frequency = new Array(10).fill(0);
      history.forEach(entry => {
        entry.split("").forEach(num => {
          frequency[parseInt(num)]++;
        });
      });

      chartNumbers.data.datasets[0].data = frequency;
      chartNumbers.update();

      updateStats(frequency);
    }

    function updateStats(frequency) {
      let maxFreq = Math.max(...frequency);
      let minFreq = Math.min(...frequency.filter(f => f > 0));

      let mostFrequent = frequency.map((f, i) => (f === maxFreq ? i : null)).filter(n => n !== null);
      let leastFrequent = frequency.map((f, i) => (f === minFreq ? i : null)).filter(n => n !== null);
      let totalGenerated = frequency.reduce((a, b) => a + b, 0);

      document.getElementById("mostFrequent").textContent = mostFrequent.join(", ") || "-";
      document.getElementById("leastFrequent").textContent = leastFrequent.join(", ") || "-";
      document.getElementById("totalGenerated").textContent = totalGenerated;
    }

    function copyToClipboard() {
      let chart = [
        document.getElementById("num1").textContent,
        document.getElementById("num2").textContent,
        document.getElementById("num3").textContent,
        document.getElementById("num4").textContent
      ].join("");
      navigator.clipboard.writeText(chart).then(() => {
        alert("Angka berhasil disalin: " + chart);
      });
    }

    function generatePrediksi() {
      const input = document.getElementById("inputTerakhir").value.trim();
      if (!/^\d{4}$/.test(input)) {
        alert("Masukkan 4 angka hasil resmi terakhir.");
        return;
      }

      let prediksi = {
        "4D": [],
        "3D": [],
        "2D": []
      };

      for (let i = 0; i < 10; i++) {
        prediksi["4D"].push(randomAngka(4));
        prediksi["3D"].push(randomAngka(3));
        prediksi["2D"].push(randomAngka(2));
      }

      let output = `<b>Input:</b> ${input}<br><br>`;
      output += `<b>Rekomendasi 4D:</b> ${prediksi["4D"].join(", ")}<br>`;
      output += `<b>Rekomendasi 3D:</b> ${prediksi["3D"].join(", ")}<br>`;
      output += `<b>Rekomendasi 2D:</b> ${prediksi["2D"].join(", ")}<br><br>`;
      output += `<i>Catatan: ini prediksi palsu yang dibuat AI untuk hiburan semata.</i>`;

      document.getElementById("outputPrediksi").innerHTML = output;
    }

    function randomAngka(panjang) {
      let angka = "";
      for (let i = 0; i < panjang; i++) {
        angka += Math.floor(Math.random() * 10);
      }
      return angka;
    }

    window.onload = function () {
      let ctx = document.getElementById('chartNumbers').getContext('2d');
      chartNumbers = new Chart(ctx, {
        type: 'bar',
        data: {
          labels: ["0", "1", "2", "3", "4", "5", "6", "7", "8", "9"],
          datasets: [{
            label: 'Frekuensi Angka Muncul',
            data: new Array(10).fill(0),
            backgroundColor: 'rgba(0, 183, 255, 0.5)',
            borderColor: 'rgba(0, 183, 255, 1)',
            borderWidth: 1
          }]
        },
        options: {
          responsive: true,
          scales: {
            y: {
              beginAtZero: true
            }
          }
        }
      });

      updateChart();
    };
  </script>
</body>
</html>
