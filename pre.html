<!DOCTYPE html><html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Lotto Analyzer</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    body {
      font-family: sans-serif;
      padding: 20px;
    }
    textarea {
      width: 100%;
      height: 200px;
    }
    canvas {
      max-width: 100%;
      margin-top: 20px;
    }
    .chart-container {
      display: flex;
      flex-wrap: wrap;
      gap: 20px;
    }
    .chart-box {
      flex: 1 1 300px;
    }
    #prediction {
      margin-top: 20px;
      font-size: 1.2em;
      font-weight: bold;
    }
  </style>
</head>
<body>
  <h2>Input 4 Digit Angka (1 per baris)</h2>
  <textarea id="inputData" placeholder="Contoh:\n1234\n5678\n...\n"></textarea>
  <br /><br />
  <button onclick="analyzeData()">Analisa</button>  <div id="prediction">Prediksi: -</div>  <div class="chart-container">
    <div class="chart-box">
      <canvas id="frequencyChart"></canvas>
    </div>
    <div class="chart-box">
      <canvas id="oddEvenChart"></canvas>
    </div>
    <div class="chart-box">
      <canvas id="highLowChart"></canvas>
    </div>
  </div>  <script>
    let frequencyChart, oddEvenChart, highLowChart;

    function analyzeData() {
      const raw = document.getElementById("inputData").value;
      const lines = raw.trim().split("\n").map(x => x.trim()).filter(x => /^\d{4}$/.test(x));

      const digits = lines.flatMap(line => line.split('').map(Number));

      const frequency = new Array(10).fill(0);
      let odd = 0, even = 0, high = 0, low = 0;

      digits.forEach(n => {
        frequency[n]++;
        if (n % 2 === 0) even++; else odd++;
        if (n >= 5) high++; else low++;
      });

      updateChart(frequency, odd, even, high, low);
      updatePrediction(frequency, odd, even, high, low);
    }

    function updatePrediction(freq, odd, even, high, low) {
      let mostFreq = [...freq].map((val, idx) => ({ num: idx, freq: val }))
                              .sort((a, b) => b.freq - a.freq)
                              .slice(0, 6)
                              .map(f => f.num);
      let result = [];

      // generate 4 angka prediksi berdasarkan kombinasi yang seimbang
      let counts = { odd: 0, even: 0, high: 0, low: 0 };
      for (let i = 0; result.length < 4 && i < mostFreq.length; i++) {
        let n = mostFreq[i];
        let isEven = n % 2 === 0;
        let isHigh = n >= 5;

        if ((isEven && counts.even >= 2) || (!isEven && counts.odd >= 2)) continue;
        if ((isHigh && counts.high >= 2) || (!isHigh && counts.low >= 2)) continue;

        result.push(n);
        isEven ? counts.even++ : counts.odd++;
        isHigh ? counts.high++ : counts.low++;
      }

      while (result.length < 4) {
        result.push(Math.floor(Math.random() * 10));
      }

      document.getElementById("prediction").textContent = `Prediksi: ${result.join('')}`;
    }

    function updateChart(freq, odd, even, high, low) {
      const labels = Array.from({length: 10}, (_, i) => i.toString());
      const colors = labels.map(i => 'rgba(0, 183, 255, 0.6)');

      if (frequencyChart) frequencyChart.destroy();
      frequencyChart = new Chart(document.getElementById('frequencyChart'), {
        type: 'bar',
        data: {
          labels,
          datasets: [{
            label: 'Frekuensi Angka',
            data: freq,
            backgroundColor: colors
          }]
        },
        options: { responsive: true, scales: { y: { beginAtZero: true } } }
      });

      if (oddEvenChart) oddEvenChart.destroy();
      oddEvenChart = new Chart(document.getElementById('oddEvenChart'), {
        type: 'doughnut',
        data: {
          labels: ['Ganjil', 'Genap'],
          datasets: [{
            data: [odd, even],
            backgroundColor: ['#ff6384', '#36a2eb']
          }]
        }
      });

      if (highLowChart) highLowChart.destroy();
      highLowChart = new Chart(document.getElementById('highLowChart'), {
        type: 'doughnut',
        data: {
          labels: ['Tinggi (5-9)', 'Rendah (0-4)'],
          datasets: [{
            data: [high, low],
            backgroundColor: ['#ff9f40', '#4bc0c0']
          }]
        }
      });
    }
  </script></body>
</html>
